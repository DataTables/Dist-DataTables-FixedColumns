/*! FixedColumns 5.0.0
 * © SpryMedia Ltd - datatables.net/license
 */
import jQuery from"jquery";import DataTable from"datatables.net";let $=jQuery;!function(){"use strict";var u,l;o.prototype.end=function(t){return void 0!==t?(0<=t&&t<=this.s.dt.columns().count()&&(this.c.end=t,this._addStyles()),this):this.c.end},o.prototype.left=function(t){return this.s.rtl?this.end(t):this.start(t)},o.prototype.right=function(t){return this.s.rtl?this.start(t):this.end(t)},o.prototype.start=function(t){return void 0!==t?(0<=t&&t<=this.s.dt.columns().count()&&(this.c.start=t,this._addStyles()),this):this.c.start},o.prototype._addStyles=function(){var s=this.s.dt,i=this,l=this.s.dt.columns(":visible").count(),o=s.table().header.structure(":visible"),n=s.table().footer.structure(":visible"),d=s.columns(":visible").widths().toArray(),t=u(s.table().node()).closest("div.dt-scroll"),e=u(s.table().node()).closest("div.dt-scroll-body")[0],r=this.s.rtl,a=this.c.start,c=this.c.end,f=r?c:a,r=r?a:c,h=s.settings()[0].oBrowser.barWidth;if(0===t.length)return this;e.offsetWidth===e.clientWidth&&(h=0),s.columns(":visible").every(function(t){var e,t=s.column.index("toVisible",t);t<a?(e=i._sum(d,t),i._fixColumn(t,e,"start",o,n,h)):l-c<=t?(e=i._sum(d,l-t-1,!0),i._fixColumn(t,e,"end",o,n,h)):i._fixColumn(t,0,"none",o,n,h)}),u(s.table().node()).toggleClass(i.classes.tableFixedStart,0<a).toggleClass(i.classes.tableFixedEnd,0<c).toggleClass(i.classes.tableFixedLeft,0<f).toggleClass(i.classes.tableFixedRight,0<r);e=s.table().header(),f=s.table().footer(),r=u(e).outerHeight(),e=u(f).outerHeight();this.dom.topBlocker.appendTo(t).css("top",0).css(this.s.rtl?"left":"right",0).css("height",r).css("width",h+1).css("display",h?"block":"none"),f&&this.dom.bottomBlocker.appendTo(t).css("bottom",0).css(this.s.rtl?"left":"right",0).css("height",e).css("width",h+1).css("display",h?"block":"none")},o.prototype._destroy=function(){this.s.dt.off(".dtfc"),this.dom.scroller.off(".dtfc"),u(this.s.dt.table().node()).removeClass(this.classes.tableScrollingEnd+" "+this.classes.tableScrollingLeft+" "+this.classes.tableScrollingStart+" "+this.classes.tableScrollingRight),this.dom.bottomBlocker.remove(),this.dom.topBlocker.remove()},o.prototype._fixColumn=function(e,l,o,t,s,n){function i(t,e){var s,i;"none"===o?t.css("position","").css("left","").css("right","").removeClass(d.classes.fixedEnd+" "+d.classes.fixedLeft+" "+d.classes.fixedRight+" "+d.classes.fixedStart):(s="start"===o?"left":"right",d.s.rtl&&(s="start"===o?"right":"left"),i=l,"end"!==o||"header"!==e&&"footer"!==e||(i+=n),t.css("position","sticky").css(s,i).addClass("start"===o?d.classes.fixedStart:d.classes.fixedEnd).addClass("left"===s?d.classes.fixedLeft:d.classes.fixedRight))}var d=this,r=this.s.dt;t.forEach(function(t){t[e]&&i(u(t[e].cell),"header")}),i(r.column(e+":visible",{page:"current"}).nodes().to$(),"body"),s&&s.forEach(function(t){t[e]&&i(u(t[e].cell),"footer")})},o.prototype._scroll=function(){var t,e,s,i,l=this.dom.scroller[0];l&&(t=u(this.s.dt.table().node()).add(this.s.dt.table().header().parentNode).add(this.s.dt.table().footer().parentNode).add("div.dt-scroll-headInner table",this.s.dt.table().container()).add("div.dt-scroll-footInner table",this.s.dt.table().container()),e=l.scrollLeft,s=!this.s.rtl,i=0!==e,l=l.scrollWidth>l.clientWidth+Math.abs(e)+1,t.toggleClass(this.classes.tableScrollingStart,i),t.toggleClass(this.classes.tableScrollingEnd,l),t.toggleClass(this.classes.tableScrollingLeft,i&&s||l&&!s),t.toggleClass(this.classes.tableScrollingRight,l&&s||i&&!s))},o.prototype._setKeyTableListener=function(){var a=this;this.s.dt.on("key-focus.dt.dtfc",function(t,e,s){var i,l,o,n=u(s.node()).offset(),d=a.dom.scroller[0],r=u(u(a.s.dt.table().node()).closest("div.dt-scroll-body"));0<a.c.start&&(o=(l=u(a.s.dt.column(a.c.start-1).header())).offset(),l=l.outerWidth(),u(s.node()).hasClass(a.classes.fixedLeft)?r.scrollLeft(0):n.left<o.left+l&&(i=r.scrollLeft(),r.scrollLeft(i-(o.left+l-n.left)))),0<a.c.end&&(o=a.s.dt.columns().data().toArray().length,l=u(s.node()).outerWidth(),o=u(a.s.dt.column(o-a.c.end).header()).offset(),u(s.node()).hasClass(a.classes.fixedRight)?r.scrollLeft(d.scrollWidth-d.clientWidth):n.left+l>o.left&&(i=r.scrollLeft(),r.scrollLeft(i-(o.left-(n.left+l)))))})},o.prototype._sum=function(t,e,s){return(t=(s=void 0===s?!1:s)?t.slice().reverse():t).slice(0,e).reduce(function(t,e){return t+e},0)},o.version="5.0.0",o.classes={bottomBlocker:"dtfc-bottom-blocker",fixedEnd:"dtfc-fixed-end",fixedLeft:"dtfc-fixed-left",fixedRight:"dtfc-fixed-right",fixedStart:"dtfc-fixed-start",tableFixedEnd:"dtfc-has-end",tableFixedLeft:"dtfc-has-left",tableFixedRight:"dtfc-has-right",tableFixedStart:"dtfc-has-start",tableScrollingEnd:"dtfc-scrolling-end",tableScrollingLeft:"dtfc-scrolling-left",tableScrollingRight:"dtfc-scrolling-right",tableScrollingStart:"dtfc-scrolling-start",topBlocker:"dtfc-top-blocker"},o.defaults={i18n:{button:"FixedColumns"},start:1,end:0};
/*! FixedColumns 5.0.0
     * © SpryMedia Ltd - datatables.net/license
     */var s=o;function o(t,e){var s,i=this;if(l&&l.versionCheck&&l.versionCheck("2"))return t=new l.Api(t),this.classes=u.extend(!0,{},o.classes),this.c=u.extend(!0,{},o.defaults,e),this.s={dt:t,rtl:"rtl"===u(t.table().node()).css("direction")},e&&void 0!==e.leftColumns&&(e.left=e.leftColumns),e&&void 0!==e.left&&(this.c[this.s.rtl?"end":"start"]=e.left),e&&void 0!==e.rightColumns&&(e.right=e.rightColumns),e&&void 0!==e.right&&(this.c[this.s.rtl?"start":"end"]=e.right),this.dom={bottomBlocker:u("<div>").addClass(this.classes.bottomBlocker),topBlocker:u("<div>").addClass(this.classes.topBlocker),scroller:u("div.dt-scroll-body",this.s.dt.table().container())},this.s.dt.settings()[0]._bInitComplete?(this._addStyles(),this._setKeyTableListener()):t.one("init.dt.dtfc",function(){i._addStyles(),i._setKeyTableListener()}),t.on("column-sizing.dt.dtfc column-reorder.dt.dtfc draw.dt.dtfc",function(){return i._addStyles()}),s=l.util.debounce(function(){i._addStyles()},50),t.on("column-visibility.dt.dtfc",function(){s()}),this.dom.scroller.on("scroll.dtfc",function(){return i._scroll()}),this._scroll(),t.settings()[0]._fixedColumns=this,t.on("destroy",function(){return i._destroy()}),this;throw new Error("FixedColumns requires DataTables 2 or newer")}t=$,l=(u=t).fn.dataTable,$.fn.dataTable.FixedColumns=s,$.fn.DataTable.FixedColumns=s;var t=DataTable.Api.register;function i(t,e){void 0===e&&(e=null);t=new DataTable.Api(t),e=e||t.init().fixedColumns||DataTable.defaults.fixedColumns;new s(t,e)}t("fixedColumns()",function(){return this}),t("fixedColumns().start()",function(t){var e=this.context[0];return void 0!==t?(e._fixedColumns.start(t),this):e._fixedColumns.start()}),t("fixedColumns().end()",function(t){var e=this.context[0];return void 0!==t?(e._fixedColumns.end(t),this):e._fixedColumns.end()}),t("fixedColumns().left()",function(t){var e=this.context[0];return void 0!==t?(e._fixedColumns.left(t),this):e._fixedColumns.left()}),t("fixedColumns().right()",function(t){var e=this.context[0];return void 0!==t?(e._fixedColumns.right(t),this):e._fixedColumns.right()}),DataTable.ext.buttons.fixedColumns={action:function(t,e,s,i){$(s).attr("active")?($(s).removeAttr("active").removeClass("active"),e.fixedColumns().start(0),e.fixedColumns().end(0)):($(s).attr("active","true").addClass("active"),e.fixedColumns().start(i.config.start),e.fixedColumns().end(i.config.end))},config:{start:1,end:0},init:function(t,e,s){void 0===t.settings()[0]._fixedColumns&&i(t.settings(),s),$(e).attr("active","true").addClass("active"),t.button(e).text(s.text||t.i18n("buttons.fixedColumns",t.settings()[0]._fixedColumns.c.i18n.button))},text:null},$(document).on("plugin-init.dt",function(t,e){"dt"!==t.namespace||!e.oInit.fixedColumns&&!DataTable.defaults.fixedColumns||e._fixedColumns||i(e,null)})}();export default DataTable;