/*!
 FixedColumns 3.2.1-dev
 Â©2010-2014 SpryMedia Ltd - datatables.net/license
*/
(function(d){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(o){return d(o,window,document)}):"object"===typeof exports?module.exports=function(o,r){o||(o=window);if(!r||!r.fn.dataTable)r=require("datatables.net")(o,r).$;return d(r,o,o.document)}:d(jQuery,window,document)})(function(d,o,r,t){var s=d.fn.dataTable,u,m=function(a,b){var c=this;if(this instanceof m){if(b===t||!0===b)b={};var f=d.fn.dataTable.camelToHungarian;f&&(f(m.defaults,m.defaults,!0),f(m.defaults,
b));f=(new d.fn.dataTable.Api(a)).settings()[0];this.s={dt:f,iTableColumns:f.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[]};this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}};if(f._oFixedColumns)throw"FixedColumns already initialised on this table";f._oFixedColumns=this;
f._bInitComplete?this._fnConstruct(b):f.oApi._fnCallbackReg(f,"aoInitComplete",function(){c._fnConstruct(b)},"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};d.extend(m.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc();this._fnGridLayout();this.fnUpdate()},fnRecalculateHeight:function(a){delete a._DTTC_iHeight;a.style.height="auto"},fnSetRowHeight:function(a,b){a.style.height=b+"px"},fnGetPosition:function(a){var b=
this.s.dt.oInstance;if(d(a).parents(".DTFC_Cloned").length){if("tr"===a.nodeName.toLowerCase())return a=d(a).index(),b.fnGetPosition(d("tr",this.s.dt.nTBody)[a]);var c=d(a).index(),a=d(a.parentNode).index();return[b.fnGetPosition(d("tr",this.s.dt.nTBody)[a]),c,b.oApi._fnVisibleToColumnIndex(this.s.dt,c)]}return b.fnGetPosition(a)},_fnConstruct:function(a){var b=this;if("function"!=typeof this.s.dt.oInstance.fnVersionCheck||!0!==this.s.dt.oInstance.fnVersionCheck("1.8.0"))alert("FixedColumns "+m.VERSION+
" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");else if(""===this.s.dt.oScroll.sX)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");else{this.s=d.extend(!0,this.s,m.defaults,a);a=this.s.dt.oClasses;this.dom.grid.dt=d(this.s.dt.nTable).parents("div."+a.sScrollWrapper)[0];this.dom.scroller=d("div."+a.sScrollBody,
this.dom.grid.dt)[0];this._fnColCalc();this._fnGridSetup();var c;d(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){c="main"}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="main");if("main"===c&&(0<b.s.iLeftColumns&&(b.dom.grid.left.liner.scrollTop=b.dom.scroller.scrollTop),0<b.s.iRightColumns))b.dom.grid.right.liner.scrollTop=b.dom.scroller.scrollTop});var f="onwheel"in r.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";if(0<b.s.iLeftColumns)d(b.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",
function(){c="left"}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="left");"left"===c&&(b.dom.scroller.scrollTop=b.dom.grid.left.liner.scrollTop,0<b.s.iRightColumns&&(b.dom.grid.right.liner.scrollTop=b.dom.grid.left.liner.scrollTop))}).on(f,function(a){b.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX});if(0<b.s.iRightColumns)d(b.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){c="right"}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&
(c="right");"right"===c&&(b.dom.scroller.scrollTop=b.dom.grid.right.liner.scrollTop,0<b.s.iLeftColumns&&(b.dom.grid.left.liner.scrollTop=b.dom.grid.right.liner.scrollTop))}).on(f,function(a){b.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX});d(o).on("resize.DTFC",function(){b._fnGridLayout.call(b)});var h=!0,e=d(this.s.dt.nTable);e.on("draw.dt.DTFC",function(){b._fnColCalc();b._fnDraw.call(b,h);h=!1}).on("column-sizing.dt.DTFC",function(){b._fnColCalc();
b._fnGridLayout(b)}).on("column-visibility.dt.DTFC",function(a,c,d,f,e){if(e===t||e)b._fnColCalc(),b._fnGridLayout(b),b._fnDraw(!0)}).on("destroy.dt.DTFC",function(){e.off("column-sizing.dt.DTFC column-visibility.dt.DTFC destroy.dt.DTFC draw.dt.DTFC");d(b.dom.scroller).off("mouseover.DTFC touchstart.DTFC scroll.DTFC");d(o).off("resize.DTFC");d(b.dom.grid.left.liner).off("mouseover.DTFC touchstart.DTFC scroll.DTFC "+f);d(b.dom.grid.left.wrapper).remove();d(b.dom.grid.right.liner).off("mouseover.DTFC touchstart.DTFC scroll.DTFC "+
f);d(b.dom.grid.right.wrapper).remove()});this._fnGridLayout();this.s.dt.oInstance.fnDraw(!1)}},_fnColCalc:function(){var a=this,b=0,c=0;this.s.aiInnerWidths=[];this.s.aiOuterWidths=[];d.each(this.s.dt.aoColumns,function(f,h){var e=d(h.nTh),g;if(e.filter(":visible").length){var i=e.outerWidth();0===a.s.aiOuterWidths.length&&(g=d(a.s.dt.nTable).css("border-left-width"),i+="string"===typeof g?1:parseInt(g,10));a.s.aiOuterWidths.length===a.s.dt.aoColumns.length-1&&(g=d(a.s.dt.nTable).css("border-right-width"),
i+="string"===typeof g?1:parseInt(g,10));a.s.aiOuterWidths.push(i);a.s.aiInnerWidths.push(e.width());f<a.s.iLeftColumns&&(b+=i);a.s.iTableColumns-a.s.iRightColumns<=f&&(c+=i)}else a.s.aiInnerWidths.push(0),a.s.aiOuterWidths.push(0)});this.s.iLeftWidth=b;this.s.iRightWidth=c},_fnGridSetup:function(){var a=this._fnDTOverflow(),b;this.dom.body=this.s.dt.nTable;this.dom.header=this.s.dt.nTHead.parentNode;this.dom.header.parentNode.parentNode.style.position="relative";var c=d('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],
f=c.childNodes[0],h=c.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(c,this.dom.grid.dt);c.appendChild(this.dom.grid.dt);this.dom.grid.wrapper=c;0<this.s.iLeftColumns&&(this.dom.grid.left.wrapper=f,this.dom.grid.left.head=f.childNodes[0],this.dom.grid.left.body=f.childNodes[1],this.dom.grid.left.liner=d("div.DTFC_LeftBodyLiner",c)[0],c.appendChild(f));0<this.s.iRightColumns&&(this.dom.grid.right.wrapper=h,this.dom.grid.right.head=h.childNodes[0],this.dom.grid.right.body=h.childNodes[1],this.dom.grid.right.liner=
d("div.DTFC_RightBodyLiner",c)[0],b=d("div.DTFC_RightHeadBlocker",c)[0],b.style.width=a.bar+"px",b.style.right=-a.bar+"px",this.dom.grid.right.headBlock=b,b=d("div.DTFC_RightFootBlocker",c)[0],b.style.width=a.bar+"px",b.style.right=-a.bar+"px",this.dom.grid.right.footBlock=b,c.appendChild(h));if(this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,0<this.s.iLeftColumns&&(this.dom.grid.left.foot=f.childNodes[2]),0<this.s.iRightColumns))this.dom.grid.right.foot=h.childNodes[2]},_fnGridLayout:function(){var a=
this,b=this.dom.grid,c=d(b.wrapper).width(),f=d(this.s.dt.nTable.parentNode).outerHeight(),h=d(this.s.dt.nTable.parentNode.parentNode).outerHeight(),e=this._fnDTOverflow(),g=this.s.iLeftWidth,i=this.s.iRightWidth,j=function(b,c){e.bar?a._firefoxScrollError()?34<d(b).height()&&(b.style.width=c+e.bar+"px"):b.style.width=c+e.bar+"px":(b.style.width=c+20+"px",b.style.paddingRight="20px",b.style.boxSizing="border-box")};e.x&&(f-=e.bar);b.wrapper.style.height=h+"px";0<this.s.iLeftColumns&&(b.left.wrapper.style.width=
g+"px",b.left.wrapper.style.height="1px",b.left.body.style.height=f+"px",b.left.foot&&(b.left.foot.style.top=(e.x?e.bar:0)+"px"),j(b.left.liner,g),b.left.liner.style.height=f+"px");0<this.s.iRightColumns&&(c-=i,e.y&&(c-=e.bar),b.right.wrapper.style.width=i+"px",b.right.wrapper.style.left=c+"px",b.right.wrapper.style.height="1px",b.right.body.style.height=f+"px",b.right.foot&&(b.right.foot.style.top=(e.x?e.bar:0)+"px"),j(b.right.liner,i),b.right.liner.style.height=f+"px",b.right.headBlock.style.display=
e.y?"block":"none",b.right.footBlock.style.display=e.y?"block":"none")},_fnDTOverflow:function(){var a=this.s.dt.nTable,b=a.parentNode,c={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};a.offsetWidth>b.clientWidth&&(c.x=!0);a.offsetHeight>b.clientHeight&&(c.y=!0);return c},_fnDraw:function(a){this._fnGridLayout();this._fnCloneLeft(a);this._fnCloneRight(a);null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right);d(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,
rightClone:this.dom.clone.right})},_fnCloneRight:function(a){if(!(0>=this.s.iRightColumns)){var b,c=[];for(b=this.s.iTableColumns-this.s.iRightColumns;b<this.s.iTableColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.right,this.dom.grid.right,c,a)}},_fnCloneLeft:function(a){if(!(0>=this.s.iLeftColumns)){var b,c=[];for(b=0;b<this.s.iLeftColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.left,this.dom.grid.left,c,a)}},_fnCopyLayout:function(a,
b,c){for(var f=[],h=[],e=[],g=0,i=a.length;g<i;g++){var j=[];j.nTr=d(a[g].nTr).clone(c,!1)[0];for(var l=0,q=this.s.iTableColumns;l<q;l++)if(-1!==d.inArray(l,b)){var p=d.inArray(a[g][l].cell,e);-1===p?(p=d(a[g][l].cell).clone(c,!1)[0],h.push(p),e.push(a[g][l].cell),j.push({cell:p,unique:a[g][l].unique})):j.push({cell:h[p],unique:a[g][l].unique})}f.push(j)}return f},_fnClone:function(a,b,c,f){var h=this,e,g,i,j,l,q,p,n,m,k=this.s.dt;if(f){d(a.header).remove();a.header=d(this.dom.header).clone(!0,!1)[0];
a.header.className+=" DTFC_Cloned";a.header.style.width="100%";b.head.appendChild(a.header);n=this._fnCopyLayout(k.aoHeader,c,!0);j=d(">thead",a.header);j.empty();e=0;for(g=n.length;e<g;e++)j[0].appendChild(n[e].nTr);k.oApi._fnDrawHead(k,n,!0)}else{n=this._fnCopyLayout(k.aoHeader,c,!1);m=[];k.oApi._fnDetectHeader(m,d(">thead",a.header)[0]);e=0;for(g=n.length;e<g;e++){i=0;for(j=n[e].length;i<j;i++)m[e][i].cell.className=n[e][i].cell.className,d("span.DataTables_sort_icon",m[e][i].cell).each(function(){this.className=
d("span.DataTables_sort_icon",n[e][i].cell)[0].className})}}this._fnEqualiseHeights("thead",this.dom.header,a.header);"auto"==this.s.sHeightMatch&&d(">tbody>tr",h.dom.body).css("height","auto");null!==a.body&&(d(a.body).remove(),a.body=null);a.body=d(this.dom.body).clone(!0)[0];a.body.className+=" DTFC_Cloned";a.body.style.paddingBottom=k.oScroll.iBarWidth+"px";a.body.style.marginBottom=2*k.oScroll.iBarWidth+"px";null!==a.body.getAttribute("id")&&a.body.removeAttribute("id");d(">thead>tr",a.body).empty();
d(">tfoot",a.body).remove();var o=d("tbody",a.body)[0];d(o).empty();if(0<k.aiDisplay.length){g=d(">thead>tr",a.body)[0];for(p=0;p<c.length;p++)l=c[p],q=d(k.aoColumns[l].nTh).clone(!0)[0],q.innerHTML="",j=q.style,j.paddingTop="0",j.paddingBottom="0",j.borderTopWidth="0",j.borderBottomWidth="0",j.height=0,j.width=h.s.aiInnerWidths[l]+"px",g.appendChild(q);d(">tbody>tr",h.dom.body).each(function(a){var b=this.cloneNode(false);b.removeAttribute("id");a=h.s.dt.aoData[h.s.dt.oFeatures.bServerSide===false?
h.s.dt.aiDisplay[h.s.dt._iDisplayStart+a]:a].anCells||d(this).children("td, th");for(p=0;p<c.length;p++){l=c[p];if(a.length>0){q=d(a[l]).clone(true,true)[0];b.appendChild(q)}}o.appendChild(b)})}else d(">tbody>tr",h.dom.body).each(function(){q=this.cloneNode(true);q.className=q.className+" DTFC_NoData";d("td",q).html("");o.appendChild(q)});a.body.style.width="100%";a.body.style.margin="0";a.body.style.padding="0";k.oScroller!==t&&(g=k.oScroller.dom.force,b.forcer?b.forcer.style.height=g.style.height:
(b.forcer=g.cloneNode(!0),b.liner.appendChild(b.forcer)));b.liner.appendChild(a.body);this._fnEqualiseHeights("tbody",h.dom.body,a.body);if(null!==k.nTFoot){if(f){null!==a.footer&&a.footer.parentNode.removeChild(a.footer);a.footer=d(this.dom.footer).clone(!0,!0)[0];a.footer.className+=" DTFC_Cloned";a.footer.style.width="100%";b.foot.appendChild(a.footer);n=this._fnCopyLayout(k.aoFooter,c,!0);b=d(">tfoot",a.footer);b.empty();e=0;for(g=n.length;e<g;e++)b[0].appendChild(n[e].nTr);k.oApi._fnDrawHead(k,
n,!0)}else{n=this._fnCopyLayout(k.aoFooter,c,!1);b=[];k.oApi._fnDetectHeader(b,d(">tfoot",a.footer)[0]);e=0;for(g=n.length;e<g;e++){i=0;for(j=n[e].length;i<j;i++)b[e][i].cell.className=n[e][i].cell.className}}this._fnEqualiseHeights("tfoot",this.dom.footer,a.footer)}b=k.oApi._fnGetUniqueThs(k,d(">thead",a.header)[0]);d(b).each(function(a){l=c[a];this.style.width=h.s.aiInnerWidths[l]+"px"});null!==h.s.dt.nTFoot&&(b=k.oApi._fnGetUniqueThs(k,d(">tfoot",a.footer)[0]),d(b).each(function(a){l=c[a];this.style.width=
h.s.aiInnerWidths[l]+"px"}))},_fnGetTrNodes:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++)"TR"==a.childNodes[c].nodeName.toUpperCase()&&b.push(a.childNodes[c]);return b},_fnEqualiseHeights:function(a,b,c){if(!("none"==this.s.sHeightMatch&&"thead"!==a&&"tfoot"!==a)){var f,h,e=b.getElementsByTagName(a)[0],c=c.getElementsByTagName(a)[0],a=d(">"+a+">tr:eq(0)",b).children(":first");a.outerHeight();a.height();for(var e=this._fnGetTrNodes(e),b=this._fnGetTrNodes(c),g=[],c=0,a=b.length;c<a;c++)f=
e[c].offsetHeight,h=b[c].offsetHeight,f=h>f?h:f,"semiauto"==this.s.sHeightMatch&&(e[c]._DTTC_iHeight=f),g.push(f);c=0;for(a=b.length;c<a;c++)b[c].style.height=g[c]+"px",e[c].style.height=g[c]+"px"}},_firefoxScrollError:function(){if(u===t){var a=d("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");u=a[0].clientWidth===a[0].offsetWidth&&0!==this._fnDTOverflow().bar;a.remove()}return u}});m.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,
sHeightMatch:"semiauto"};m.version="3.2.1-dev";s.Api.register("fixedColumns()",function(){return this});s.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnUpdate()})});s.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnRedrawLayout()})});s.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(a,b){a._oFixedColumns&&
a._oFixedColumns.fnRecalculateHeight(this.row(b).node())})});s.Api.register("fixedColumns().rowIndex()",function(a){a=d(a);return a.parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[a.index()]:this.row(a).index()});s.Api.register("fixedColumns().cellIndex()",function(a){a=d(a);if(a.parents(".DTFC_Cloned").length){var b=a.parent().index(),b=this.rows({page:"current"}).indexes()[b],a=a.parents(".DTFC_LeftWrapper").length?a.index():this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+
a.index();return{row:b,column:this.column.index("toData",a),columnVisible:a}}return this.cell(a).index()});d(r).on("init.dt.fixedColumns",function(a,b){if("dt"===a.namespace){var c=b.oInit.fixedColumns,f=s.defaults.fixedColumns;if(c||f)f=d.extend({},c,f),!1!==c&&new m(b,f)}});d.fn.dataTable.FixedColumns=m;return d.fn.DataTable.FixedColumns=m});
